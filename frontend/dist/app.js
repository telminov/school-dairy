(function() {
  angular.module('schoolDairy', ['ngResource', 'ngSanitize', 'ngRoute', 'ngAnimate', 'ui.bootstrap', 'toaster', 'swAuth', 'swUtils']).config(function($routeProvider) {
    return $routeProvider.when('/', {
      templateUrl: 'src/app/controllers/main.html',
      controller: 'MainCtrl',
      label: ''
    }).when('/schedule/', {
      templateUrl: 'src/app/controllers/schedule.html',
      controller: 'ScheduleCtrl',
      label: 'Расписание'
    }).when('/login/', {
      templateUrl: 'src/app/controllers/login.html',
      controller: 'AuthLoginCtrl',
      label: 'Вход'
    }).when('/logout/', {
      templateUrl: 'src/app/controllers/logout.html',
      controller: 'AuthLogoutCtrl',
      label: 'Выход'
    });
  }).config(function(authConfigProvider, config) {
    authConfigProvider.setSystemLabel('Дневник');
    return authConfigProvider.setServerAddress(config.serverAddress);
  }).config(function($httpProvider) {
    return $httpProvider.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';
  }).run(function($location, $rootScope, swTitle) {
    $rootScope.swTitle = swTitle;
    return $rootScope.$on('$routeChangeSuccess', function(event, current, previous) {
      var baseTitle, ref;
      baseTitle = ((ref = current.$$route) != null ? ref.label : void 0) || '';
      swTitle.setTitleBase(baseTitle);
      swTitle.setTitleStart('');
      return swTitle.setTitleEnd('');
    });
  });

}).call(this);

(function() {
  angular.module('schoolDairy').config(function($httpProvider) {
    return $httpProvider.interceptors.push('serverErrorInterceptor');
  }).factory('serverErrorInterceptor', function($location, $q, $log) {
    return {
      responseError: function(response) {
        if (response.status === 0 || (response.status >= 500 && response.status <= 600)) {
          $log.error(response);
        }
        return $q.reject(response);
      }
    };
  });

}).call(this);

(function() {
  angular.module('schoolDairy').controller('MainCtrl', function($scope, $location) {
    return $location.path('/schedule/');
  });

}).call(this);

(function() {
  angular.module('schoolDairy').controller('ScheduleCtrl', function($scope, $log, toaster, schedule, DayItem) {
    $scope.schedule = schedule;
    $scope.dayItems = DayItem.query();
    $scope.loading = true;
    return schedule.load().then(function() {
      return $scope.loading = false;
    }, function(response) {
      $scope.loading = false;
      toaster.pop('error', 'Ошибка', 'Не удалось получить расписание занятий');
      return $log.error(response);
    });
  });

}).call(this);

(function() {
  angular.module('schoolDairy').constant('config', {
    serverAddress: 'http://192.168.160.10:8000'
  });

}).call(this);

(function() {
  angular.module('schoolDairy').factory('DayItem', function($resource, config) {
    var url;
    url = config.serverAddress + "/day_item/:id/";
    return $resource(url);
  });

}).call(this);

(function() {
  angular.module('schoolDairy').service('schedule', function($http, config) {
    this.days = [];
    this._items = {};
    this.load = function() {
      var promise, url;
      this.days.length = 0;
      this._items = {};
      url = config.serverAddress + "/get_schedule/";
      promise = $http.get(url);
      promise.then((function(_this) {
        return function(response) {
          var day, i, item, len, ref, results;
          ref = response.data.schedule;
          results = [];
          for (i = 0, len = ref.length; i < len; i++) {
            day = ref[i];
            _this.days.push(day);
            results.push((function() {
              var j, len1, ref1, results1;
              ref1 = day.items;
              results1 = [];
              for (j = 0, len1 = ref1.length; j < len1; j++) {
                item = ref1[j];
                if (!this._items[day.name]) {
                  this._items[day.name] = {};
                }
                results1.push(this._items[day.name][item.day_item.id] = item);
              }
              return results1;
            }).call(_this));
          }
          return results;
        };
      })(this));
      return promise;
    };
    this.getItem = (function(_this) {
      return function(dayName, dayItem) {
        var ref;
        return (ref = _this._items[dayName]) != null ? ref[dayItem.id] : void 0;
      };
    })(this);
  });

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5jb2ZmZWUiLCJpbnRlcmNlcHRvcnMuY29mZmVlIiwiY29udHJvbGxlcnMvbWFpbi5jb2ZmZWUiLCJjb250cm9sbGVycy9zY2hlZHVsZS5jb2ZmZWUiLCJjb25maWcvY29uZmlnLmNvZmZlZSIsInJlc291cmNlcy9kYXlfaXRlbS5jb2ZmZWUiLCJyZXNvdXJjZXMvc2NoZWR1bGUuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUEsRUFBQSxPQUFPLENBQUMsTUFBUixDQUFlLGFBQWYsRUFBOEIsQ0FDMUIsWUFEMEIsRUFFMUIsWUFGMEIsRUFHMUIsU0FIMEIsRUFJMUIsV0FKMEIsRUFNMUIsY0FOMEIsRUFPMUIsU0FQMEIsRUFTMUIsUUFUMEIsRUFVMUIsU0FWMEIsQ0FBOUIsQ0FhQSxDQUFDLE1BYkQsQ0FhUSxTQUFDLGNBQUQsR0FBQTtXQUNKLGNBRUEsQ0FBQyxJQUZELENBRU0sR0FGTixFQUdJO0FBQUEsTUFBQSxXQUFBLEVBQWEsK0JBQWI7QUFBQSxNQUNBLFVBQUEsRUFBWSxVQURaO0FBQUEsTUFFQSxLQUFBLEVBQU8sRUFGUDtLQUhKLENBUUEsQ0FBQyxJQVJELENBUU0sWUFSTixFQVNJO0FBQUEsTUFBQSxXQUFBLEVBQWEsbUNBQWI7QUFBQSxNQUNBLFVBQUEsRUFBWSxjQURaO0FBQUEsTUFFQSxLQUFBLEVBQU8sWUFGUDtLQVRKLENBY0EsQ0FBQyxJQWRELENBY00sU0FkTixFQWVJO0FBQUEsTUFBQSxXQUFBLEVBQWEsZ0NBQWI7QUFBQSxNQUNBLFVBQUEsRUFBWSxlQURaO0FBQUEsTUFFQSxLQUFBLEVBQU8sTUFGUDtLQWZKLENBbUJBLENBQUMsSUFuQkQsQ0FtQk0sVUFuQk4sRUFvQkk7QUFBQSxNQUFBLFdBQUEsRUFBYSxpQ0FBYjtBQUFBLE1BQ0EsVUFBQSxFQUFZLGdCQURaO0FBQUEsTUFFQSxLQUFBLEVBQU8sT0FGUDtLQXBCSixFQURJO0VBQUEsQ0FiUixDQXdDQSxDQUFDLE1BeENELENBd0NRLFNBQUMs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VixDQUpWLENBQUE7QUFBQSxNQUtBLE9BQU8sQ0FBQyxJQUFSLENBQ0ksQ0FBQSxTQUFBLEtBQUEsR0FBQTtlQUFBLFNBQUMsUUFBRCxHQUFBO0FBQ0ksY0FBQSwrQkFBQTtBQUFBO0FBQUE7ZUFBQSxxQ0FBQTt5QkFBQTtBQUNJLFlBQUEsS0FBSSxDQUFDLElBQUksQ0FBQyxJQUFWLENBQWUsR0FBZixDQUFBLENBQUE7QUFBQTs7QUFFQTtBQUFBO21CQUFBLHdDQUFBOytCQUFBO0FBQ0ksZ0JBQUEsSUFBRyxDQUFBLElBQVEsQ0FBQyxNQUFPLENBQUEsR0FBRyxDQUFDLElBQUosQ0FBbkI7QUFDSSxrQkFBQSxJQUFJLENBQUMsTUFBTyxDQUFBLEdBQUcsQ0FBQyxJQUFKLENBQVosR0FBd0IsRUFBeEIsQ0FESjtpQkFBQTtBQUFBLDhCQUVBLElBQUksQ0FBQyxNQUFPLENBQUEsR0FBRyxDQUFDLElBQUosQ0FBVSxDQUFBLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBZCxDQUF0QixHQUEwQyxLQUYxQyxDQURKO0FBQUE7OzJCQUZBLENBREo7QUFBQTt5QkFESjtRQUFBLEVBQUE7TUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBREosQ0FMQSxDQUFBO0FBZ0JBLGFBQU8sT0FBUCxDQWpCUTtJQUFBLENBSFosQ0FBQTtBQUFBLElBc0JBLElBQUksQ0FBQyxPQUFMLEdBQWUsQ0FBQSxTQUFBLEtBQUEsR0FBQTthQUFBLFNBQUMsT0FBRCxFQUFVLE9BQVYsR0FBQTtBQUNYLFlBQUEsR0FBQTtBQUFBLDBEQUE2QixDQUFBLE9BQU8sQ0FBQyxFQUFSLFVBQTdCLENBRFc7TUFBQSxFQUFBO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQXRCZixDQURpQjtFQUFBLENBRnJCLENBQUEsQ0FBQTtBQUFBIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXIubW9kdWxlKCdzY2hvb2xEYWlyeScsIFtcbiAgICAnbmdSZXNvdXJjZSdcbiAgICAnbmdTYW5pdGl6ZSdcbiAgICAnbmdSb3V0ZSdcbiAgICAnbmdBbmltYXRlJ1xuXG4gICAgJ3VpLmJvb3RzdHJhcCdcbiAgICAndG9hc3RlcidcblxuICAgICdzd0F1dGgnXG4gICAgJ3N3VXRpbHMnXG5dKVxuXG4uY29uZmlnICgkcm91dGVQcm92aWRlcikgLT5cbiAgICAkcm91dGVQcm92aWRlclxuXG4gICAgLndoZW4oJy8nLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3NyYy9hcHAvY29udHJvbGxlcnMvbWFpbi5odG1sJ1xuICAgICAgICBjb250cm9sbGVyOiAnTWFpbkN0cmwnXG4gICAgICAgIGxhYmVsOiAnJ1xuICAgIClcblxuICAgIC53aGVuKCcvc2NoZWR1bGUvJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdzcmMvYXBwL2NvbnRyb2xsZXJzL3NjaGVkdWxlLmh0bWwnXG4gICAgICAgIGNvbnRyb2xsZXI6ICdTY2hlZHVsZUN0cmwnXG4gICAgICAgIGxhYmVsOiAn0KDQsNGB0L/QuNGB0LDQvdC40LUnXG4gICAgKVxuXG4gICAgLndoZW4oJy9sb2dpbi8nLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3NyYy9hcHAvY29udHJvbGxlcnMvbG9naW4uaHRtbCdcbiAgICAgICAgY29udHJvbGxlcjogJ0F1dGhMb2dpbkN0cmwnXG4gICAgICAgIGxhYmVsOiAn0JLRhdC+0LQnXG4gICAgKVxuICAgIC53aGVuKCcvbG9nb3V0LycsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnc3JjL2FwcC9jb250cm9sbGVycy9sb2dvdXQuaHRtbCdcbiAgICAgICAgY29udHJvbGxlcjogJ0F1dGhMb2dvdXRDdHJsJ1xuICAgICAgICBsYWJlbDogJ9CS0YvRhdC+0LQnXG4gICAgKVxuXG5cbi5jb25maWcgKGF1dGhDb25maWdQcm92aWRlciwgY29uZmlnKSAtPlxuICAgIGF1dGhDb25maWdQcm92aWRlci5zZXRTeXN0ZW1MYWJlbCgn0JTQvdC10LLQvdC40LonKVxuICAgIGF1dGhDb25maWdQcm92aWRlci5zZXRTZXJ2ZXJBZGRyZXNzKGNvbmZpZy5zZXJ2ZXJBZGRyZXNzKVxuXG4uY29uZmlnICgkaHR0cFByb3ZpZGVyKSAtPlxuICAgICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5wb3N0WydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnXG5cbi5ydW4gKCRsb2NhdGlvbiwgJHJvb3RTY29wZSwgc3dUaXRsZSkgLT5cbiAgICAkcm9vdFNjb3BlLnN3VGl0bGUgPSBzd1RpdGxlXG5cbiAgICAkcm9vdFNjb3BlLiRvbiAnJHJvdXRlQ2hhbmdlU3VjY2VzcycsIChldmVudCwgY3VycmVudCwgcHJldmlvdXMpIC0+XG4gICAgICAgIGJhc2VUaXRsZSA9IGN1cnJlbnQuJCRyb3V0ZT8ubGFiZWwgb3IgJydcbiAgICAgICAgc3dUaXRsZS5zZXRUaXRsZUJhc2UoYmFzZVRpdGxlKVxuICAgICAgICBzd1RpdGxlLnNldFRpdGxlU3RhcnQoJycpXG4gICAgICAgIHN3VGl0bGUuc2V0VGl0bGVFbmQoJycpIiwiYW5ndWxhci5tb2R1bGUoJ3NjaG9vbERhaXJ5JylcblxuIyDQv9C10YDQtdGF0LLQsNGCIDUwMNGFINC+0YjQuNCx0L7QuiDRgdC10YDQstC10YDQsFxuLmNvbmZpZyAoJGh0dHBQcm92aWRlcikgLT5cbiAgICAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKCdzZXJ2ZXJFcnJvckludGVyY2VwdG9yJylcblxuLmZhY3RvcnkgJ3NlcnZlckVycm9ySW50ZXJjZXB0b3InLCAoJGxvY2F0aW9uLCAkcSwgJGxvZykgLT5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3BvbnNlRXJyb3I6IChyZXNwb25zZSkgLT5cbiAgICAgICAgICAgICAgICBpZiByZXNwb25zZS5zdGF0dXMgPT0gMCBvciAocmVzcG9uc2Uuc3RhdHVzID49IDUwMCBhbmQgcmVzcG9uc2Uuc3RhdHVzIDw9IDYwMClcbiAgICAgICAgICAgICAgICAgICAgJGxvZy5lcnJvcihyZXNwb25zZSlcbiMgICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IHJlc3BvbnNlLnN0YXR1c1RleHQgb3IgJydcbiMgICAgICAgICAgICAgICAgICAgIHRvYXN0ZXIucG9wKCdlcnJvcicsICfQntGI0LjQsdC60LAg0YHQtdGA0LLQtdGA0LAnLCBlcnJvck1lc3NhZ2UpXG4gICAgICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChyZXNwb25zZSlcblxuICAgICAgICB9IiwiYW5ndWxhci5tb2R1bGUoJ3NjaG9vbERhaXJ5Jylcbi5jb250cm9sbGVyICdNYWluQ3RybCcsICgkc2NvcGUsICRsb2NhdGlvbikgLT5cbiAgICAkbG9jYXRpb24ucGF0aCgnL3NjaGVkdWxlLycpIiwiYW5ndWxhci5tb2R1bGUoJ3NjaG9vbERhaXJ5Jylcbi5jb250cm9sbGVyICdTY2hlZHVsZUN0cmwnLCAoJHNjb3BlLCAkbG9nLCB0b2FzdGVyLCBzY2hlZHVsZSwgRGF5SXRlbSkgLT5cbiAgICAkc2NvcGUuc2NoZWR1bGUgPSBzY2hlZHVsZVxuICAgICRzY29wZS5kYXlJdGVtcyA9IERheUl0ZW0ucXVlcnkoKVxuXG4gICAgJHNjb3BlLmxvYWRpbmcgPSB0cnVlXG4gICAgc2NoZWR1bGUubG9hZCgpLnRoZW4oXG4gICAgICAgIC0+ICRzY29wZS5sb2FkaW5nID0gZmFsc2VcbiAgICAgICAgKHJlc3BvbnNlKSAtPlxuICAgICAgICAgICAgJHNjb3BlLmxvYWRpbmcgPSBmYWxzZVxuICAgICAgICAgICAgdG9hc3Rlci5wb3AoJ2Vycm9yJywgJ9Ce0YjQuNCx0LrQsCcsICfQndC1INGD0LTQsNC70L7RgdGMINC/0L7Qu9GD0YfQuNGC0Ywg0YDQsNGB0L/QuNGB0LDQvdC40LUg0LfQsNC90Y/RgtC40LknKVxuICAgICAgICAgICAgJGxvZy5lcnJvcihyZXNwb25zZSlcbiAgICApXG4iLCJhbmd1bGFyLm1vZHVsZSgnc2Nob29sRGFpcnknKVxuICAgIC5jb25zdGFudCgnY29uZmlnJywge1xuICAgICAgICBzZXJ2ZXJBZGRyZXNzOiAnaHR0cDovLzE5Mi4xNjguMTYwLjEwOjgwMDAnLFxuIyAgICAgICAgc2VydmVyQWRkcmVzczogJ2h0dHA6Ly8xMjcuMC4wLjE6ODAwMScsXG4gICAgfSkiLCJhbmd1bGFyLm1vZHVsZSgnc2Nob29sRGFpcnknKVxuXG4uZmFjdG9yeSAnRGF5SXRlbScsICgkcmVzb3VyY2UsIGNvbmZpZykgLT5cbiAgICB1cmwgPSBcIiN7IGNvbmZpZy5zZXJ2ZXJBZGRyZXNzIH0vZGF5X2l0ZW0vOmlkL1wiXG4gICAgcmV0dXJuICRyZXNvdXJjZSh1cmwpIiwiYW5ndWxhci5tb2R1bGUoJ3NjaG9vbERhaXJ5JylcblxuLnNlcnZpY2UgJ3NjaGVkdWxlJywgKCRodHRwLCBjb25maWcpIC0+XG4gICAgdGhpcy5kYXlzID0gW11cbiAgICB0aGlzLl9pdGVtcyA9IHt9XG5cbiAgICB0aGlzLmxvYWQgPSAtPlxuICAgICAgICB0aGlzLmRheXMubGVuZ3RoID0gMFxuICAgICAgICB0aGlzLl9pdGVtcyA9IHt9XG5cbiAgICAgICAgdXJsID0gXCIjeyBjb25maWcuc2VydmVyQWRkcmVzcyB9L2dldF9zY2hlZHVsZS9cIlxuICAgICAgICBwcm9taXNlID0gJGh0dHAuZ2V0KHVybClcbiAgICAgICAgcHJvbWlzZS50aGVuKFxuICAgICAgICAgICAgKHJlc3BvbnNlKSA9PlxuICAgICAgICAgICAgICAgIGZvciBkYXkgaW4gcmVzcG9uc2UuZGF0YS5zY2hlZHVsZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRheXMucHVzaChkYXkpXG5cbiAgICAgICAgICAgICAgICAgICAgZm9yIGl0ZW0gaW4gZGF5Lml0ZW1zXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgdGhpcy5faXRlbXNbZGF5Lm5hbWVdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faXRlbXNbZGF5Lm5hbWVdID0ge31cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2l0ZW1zW2RheS5uYW1lXVtpdGVtLmRheV9pdGVtLmlkXSA9IGl0ZW1cblxuICAgICAgICApXG4gICAgICAgIHJldHVybiBwcm9taXNlXG5cbiAgICB0aGlzLmdldEl0ZW0gPSAoZGF5TmFtZSwgZGF5SXRlbSkgPT5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2l0ZW1zW2RheU5hbWVdP1tkYXlJdGVtLmlkXVxuXG4gICAgcmV0dXJuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9